<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Power_curve</title>
    <link rel="stylesheet" href="../css/index.css" />
    <script src="https://rest.riduck.com/report-api/curve_lib.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="main-content">
        <div class="front-header">
          <div class="fl">
            <div class="logo"><img src="../iamge/common/logo.png" /></div>
          </div>
          <div class="fr">
            <ul>
              <li>
                <p>Slowtwitch</p>
                <p>cycling data</p>
                <p>analysis report</p>
              </li>
              <li>
                <p>2022.00.00~2022.00.00</p>
                <p>ë¶„ì„ : <span id="c_writer"></span> ë©˜í† </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="power_curve_title" id="title">
          <h4>ğŸ“‰íŒŒì›Œ ë“€ë ˆì´ì…˜ ì»¤ë¸Œ ë° í”¼í¬íŒŒì›Œ ë¶„ì„</h4>
          <p></p>
        </div>
        <div class="power-curve-wrap">
          <div id="power_curve">
            <img src="../iamge/common/power_duration.png" alt="" />
          </div>
          <div id="peak_power_limit">
            <div class="table1">
              <ul>
                <li class="col">1ì´ˆ</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">5ì´ˆ</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">15ì´ˆ</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">30ì´ˆ</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">1ë¶„</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">2ë¶„</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">5ë¶„</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">10ë¶„</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">20ë¶„</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">40ë¶„</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
              <ul>
                <li class="col">1ì‹œê°„</li>
                <li>000 w</li>
                <li>22/07/16</li>
                <li>ìœ íš¨ê¸°ê°„ 00ì¼ ë‚¨ìŒ</li>
              </ul>
            </div>
            <div class="table2">
              <ul>
                <li class="col">4ë¶„:000w</li>
                <li>í…ŒìŠ¤íŠ¸:000w</li>
                <li>5ë¶„:000w</li>
                <li>6ë¶„:000w</li>
              </ul>
              <ul>
                <li class="col">7ë¶„:000w</li>
                <li>8ë¶„:000w</li>
                <li>9ë¶„:000w</li>
                <li>10ë¶„:000w</li>
              </ul>
              <ul>
                <li class="col">12ë¶„:000w</li>
                <li>15ë¶„:000w</li>
                <li>20ë¶„:000w</li>
                <li>25ë¶„:000w</li>
              </ul>
              <ul>
                <li class="col">30ë¶„:000w</li>
                <li>40ë¶„:000w</li>
                <li>1ì‹œê°„:000w</li>
                <li></li>
              </ul>
              <!--  <span>*FTP ê¸°ì¤€ íŒŒì›ŒëŠ” Ramp í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.</span> -->
            </div>
          </div>

          <div class="how-to">
            <p>
              <b>íŒŒì›Œ ë“€ë ˆì´ì…˜ ì»¤ë¸Œì™€ í”¼í¬íŒŒì›Œ</b>ì— ëŒ€í•œ ë¶„ì„ì€ íŒŒì›Œ ë°ì´í„°
              ê´€ë¦¬ì—ì„œ ê°€ì¥ ìœ ìš©í•œ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.
            </p>
            <p>
              -ê¸°ëŒ€íŒŒì›ŒëŠ” ì „ ì„¸ê³„ 60ë§Œ ëª…ì˜ í†µê³„ë¥¼ í†µí•´ ë‚˜ì™€ íŠ¹ì • í”¼í¬íŒŒì›Œ ëŒ€ë¹„
              ìœ ì‚¬í•œ FTP(w/kg) í¼í¬ë¨¼ìŠ¤ë¥¼ ê°€ì§„ ì‚¬ëŒë“¤ì˜ ì´ìƒì ì¸ íŒŒì›Œì»¤ë¸Œì…ë‹ˆë‹¤.
            </p>
            <p>
              -ìµœëŒ€ íŒŒì›ŒëŠ” ë‚´ê°€ ì‹¤ì œë¡œ íŒŒì›Œë¥¼ ê¸°ë¡í•œ ì‹œê°„ëŒ€ë³„ íŒŒì›Œì´ë©°
              í•„ë“œ/ì¸ë„ì–´ì— ì°¨ì´ê°€ ìˆëŠ” ê²½ìš° êµ¬ë¶„í•˜ì—¬ í‘œê¸°í•˜ê³  ìˆìŠµë‹ˆë‹¤.
            </p>
            <p>
              -ì£¼ìš” ì‹œê°„ëŒ€ í”¼í¬íŒŒì›ŒëŠ” ë³¸ì¸ì˜ ì—­ëŸ‰ê³¼ ì„±í–¥ì„ ì •ì˜í•˜ëŠ” ì¤‘ìš”í•œ
              ê¸°ì¤€ì´ ë˜ê¸°ì— ì£¼ìš” ì‹œê°„ëŒ€ì˜ í”¼í¬íŒŒì›Œë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ í•˜ì‹œê¸¸
              ê¶Œì¥í•©ë‹ˆë‹¤.
            </p>
            <p>
              -í”¼í¬íŒŒì›ŒëŠ” 12ì£¼(84ì¼)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê¸°ë¡ë˜ë©°, í†µê³„ì ìœ¼ë¡œ ê°€ì¥ ìš°ìˆ˜í•œ
              í”¼í¬íŒŒì›Œì˜ ê¸°ë¡ì€ FTPì˜ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.
            </p>
            <p>
              -ì¼ë°˜ì ìœ¼ë¡œ FTP w/kgì´ 4ì ëŒ€ ë¯¸ë§Œì˜ ë ˆí¬ë ˆì´ì…”ë„ ë¼ì´ë”ì—ê²Œ
              20~1ì‹œê°„ íŒŒì›Œê°€ FTP ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •ëœ ê²½ìš°, all-out ë˜ëŠ” FTP
              í…ŒìŠ¤íŠ¸í•˜ì§€ ì•Šì€ ìƒíƒœë¡œ ë´…ë‹ˆë‹¤. ìœ ì‚°ì†Œ ê¸°ëŸ‰ì´ ë‚®ìœ¼ë©´ ê·¸ë§Œí¼
              ì¸ë‚´ë ¥ê³¼ íšŒë³µë ¥ì´ ë¶€ì¡±í•˜ì—¬ ì§€ì†ë ¥ì´ë‚˜ í˜ì´ìŠ¤ ì¡°ì ˆì— ì–´ë ¤ì›€ì´ ë§ì•„
              ìµœì„ ì˜ ë…¸ë ¥ì„ ë‹¤í•˜ê¸° ì–´ë µê³  ê·¸ë§Œí¼ í”¼í¬íŒŒì›Œì˜ ì‹ ë¢°ë„ê°€ ë‚®ìŠµë‹ˆë‹¤.
              ê·¸ë˜ì„œ, ë ˆí¬ë ˆì´ì…”ë„ ë¼ì´ë”ë“¤ì—ê²ŒëŠ” 4ë¶„~10ë¶„ í”¼í¬ íŒŒì›Œ í…ŒìŠ¤íŠ¸ë¥¼
              ê¶Œì¥í•©ë‹ˆë‹¤.
            </p>

            <p>
              -FTP w/kg 4ì ëŒ€ ì´ìƒì˜ ìš°ìˆ˜í•œ í¼í¬ë¨¼ìŠ¤ë¥¼ ê°€ì§„ ë¼ì´ë”ë“¤ì€ 10~20ë¶„
              ì¥ì‹œê°„ í”¼í¬íŒŒì›Œë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ê¸¸ ê¶Œì¥í•©ë‹ˆë‹¤. 20ë¶„ í”¼í¬íŒŒì›Œ
              í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ ì¶”ì • FTPê°€ ì‹ ë¢°ë„ê°€ ë†’ìŠµë‹ˆë‹¤.
            </p>
            <p>
              -5,10,20ë¶„ ì™¸ì—ë„ 4,7,8,12,15,25ë¶„ ë“± 4ë¶„ ì´ìƒì˜ ëŒ€ë¶€ë¶„ì˜
              í”¼í¬íŒŒì›Œê°€ FTP ê¸°ì¤€íŒŒì›Œë¡œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <div class="power-curve-comment comment-wrap">
          <h4>ë¶„ì„ì˜ê²¬</h4>
          <div id="power_curve_comment">
            <textarea id="power_curve_comment_input"></textarea>
          </div>
        </div>

        <footer>
          <div class="company_info">
            <p>www.riduck.com</p>
            <p>Copyright&copy;Riduck Co.Ltd. All rights reserved.</p>
          </div>
        </footer>
      </div>
    </div>
    <script>
      var pdc_scatter_chart = [];
      var pdc_curve_chart = [];

      var pdc_list = dashboard_json.pdc_list;
      var pdc_best_power = dashboard_json.pdc_list.best_data.power;
      var pdc_stereo_power = dashboard_json.pdc_list.best_data.stereo_power;
      var pdc_outdoor_power = dashboard_json.pdc_list.best_data.outdoor_power;

      var pdc_power_all = dashboard_json.pdc_list.best_data.power_all;
      var pdc_stereo_all = dashboard_json.pdc_list.best_data.stereo_all;

      var pdc_best_points = [];
      var pdc_stereo_points = [];
      var pdc_outdoor_points = [];

      var duration_arr = Array(
        1,
        5,
        15,
        30,
        60,
        120,
        300,
        600,
        1200,
        2400,
        3600
      );
      var label_arr = Array(
        "01ì´ˆ",
        "05ì´ˆ",
        "15ì´ˆ",
        "30ì´ˆ",
        "01ë¶„",
        "02ë¶„",
        "05ë¶„",
        "10ë¶„",
        "20ë¶„",
        "40ë¶„",
        "1ì‹œê°„"
      );

      var label_major_arr = Array(
        "1ì´ˆ",
        "5ì´ˆ",
        "15ì´ˆ",
        "30ì´ˆ",
        "1ë¶„",
        "2ë¶„",
        "5ë¶„",
        "10ë¶„",
        "20ë¶„",
        "40ë¶„",
        "1ì‹œê°„"
      );
      var label_all_arr = {
        240: "4ë¶„",
        300: "5ë¶„",
        360: "6ë¶„",
        420: "7ë¶„",
        480: "8ë¶„",
        540: "9ë¶„",
        600: "10ë¶„",
        720: "12ë¶„",
        900: "15ë¶„",
        1200: "20ë¶„",
        1500: "25ë¶„",
        1800: "30ë¶„",
        2400: "40ë¶„",
        3600: "1ì‹œê°„",
      };
      var label_test_arr = {
        250: "Ramp í…ŒìŠ¤íŠ¸",
        470: "ì˜¤ë¦¬ì§€ë‚  MAP í…ŒìŠ¤íŠ¸",
        1350: "Hunter Allen FTP í…ŒìŠ¤íŠ¸",
      };
      /*
$watts_250_arr = null;
$watts_470_arr = null;				
$watts_1350_arr = null;				
*/

      //ìœ ì‚°ì†Œ ì˜ì—­ ê¸°ëŒ€ íŒŒì›Œ ë¹„êµ
      var timestamp = new Date().getTime();

      var pdc_target_activities =
        dashboard_json.pdc_list.best_data.peak_activities;

      var effective_html = "<ul class='peakpower-major-ul'>";
      var ftp_peak_html = "<ul class='peakpower-minor-ul'>";
      var best_index_html = "";
      var strip_line = null;

      $.each(pdc_target_activities, function (index, peak_activity_id) {
        var target_activity_obj = activity_list.find(
          (activity) => activity.activity_id == peak_activity_id
        );

        if (best_index == duration_arr[index]) {
          best_index_html =
            "FTP ê¸°ì¤€ íŒŒì›ŒëŠ” " + label_major_arr[index] + "ì…ë‹ˆë‹¤.";
          strip_line = best_index;
        }

        var remain_date =
          85 -
          Math.round(
            (timestamp / 1000 - target_activity_obj.timestamp) / (3600 * 24)
          );

        effective_html +=
          "<li>" +
          label_major_arr[index] +
          " : " +
          pdc_best_power[index] +
          " W, " +
          target_activity_obj.start_date.substr(0, 8) +
          ", ìœ íš¨ê¸°ê°„ " +
          remain_date +
          "ì¼ ë‚¨ìŒ</li>";
      });

      effective_html += "</ul>";
      //logarithmic:true,

      $.each(pdc_list, function (index, item) {
        var pdc_scatter_points = [];
        var activity_id = index;

        $.each(item.power, function (x, y) {
          pdc_scatter_points.push({
            x: duration_arr[x],
            y: y,
            label: label_arr[x],
            activity_id: activity_id,
          });
        });

        //console.log(decimalToHexString(Number(activity_id)));

        pdc_scatter_chart.push({
          name: "pdc scatter chart",
          type: "scatter",
          markerSize: 10,
          fillOpacity: "0.2",
          dataPoints: pdc_scatter_points,
        });
      });

      $.each(pdc_best_power, function (x, y) {
        pdc_best_points.push({ x: duration_arr[x], y: y }); // indexLabel: label_arr[x] + ", {y}w"
      });

      $.each(pdc_outdoor_power, function (x, y) {
        pdc_outdoor_points.push({ x: duration_arr[x], y: y }); //, indexLabel: label_arr[x] + ", {y}w"
      });

      //ê¸°ëŒ€íŒŒì›Œì— ë¼ë²¨ë§
      $.each(pdc_stereo_power, function (x, y) {
        var index_label =
          "-" +
          label_arr[x] +
          "íŒŒì›Œ- ê¸°ëŒ€:" +
          pdc_stereo_power[x] +
          " w " +
          " ìµœëŒ€:" +
          pdc_best_power[x] +
          " w " +
          " í•„ë“œ:" +
          pdc_outdoor_power[x] +
          " w ";

        if (pdc_best_power[x] == pdc_outdoor_power[x]) {
          index_label =
            "-" +
            label_arr[x] +
            "íŒŒì›Œ- ê¸°ëŒ€:" +
            pdc_stereo_power[x] +
            " w " +
            " ìµœëŒ€:" +
            pdc_best_power[x] +
            " w ";
        }

        pdc_stereo_points.push({
          x: duration_arr[x],
          y: y,
          indexLabel: index_label,
        });
      });

      //ftp_peak_html

      $.each(pdc_power_all, function (index, power) {
        //console.log(best_index + " " + index);

        if (best_index == index) {
          best_index_html =
            "FTP ê¸°ì¤€ íŒŒì›ŒëŠ” " + label_all_arr[String(index)] + "ì…ë‹ˆë‹¤.";
          if (index == 250 || index == 470 || index == 1350)
            best_index_html =
              "FTP ê¸°ì¤€ íŒŒì›ŒëŠ” " + label_test_arr[String(index)] + "ì…ë‹ˆë‹¤.";
        }

        //vo2max
        if (index >= 240 && index <= 3600) {
          if (index == 250 || index == 470 || index == 1350) {
            ftp_peak_html += "<li>í…ŒìŠ¤íŠ¸ : " + power + " W" + "</li>";
          } else {
            ftp_peak_html +=
              "<li>" +
              label_all_arr[String(index)] +
              " : " +
              power +
              " W" +
              "</li>";
            strip_line = best_index;
          }
        }
      });

      ftp_peak_html +=
        "<li style='clear:both'></li><div class='best-index'>" +
        best_index_html +
        "</div></ul>";

      pdc_scatter_chart.push({
        name: "pdc best chart",
        type: "splineArea",
        lineColor: "#f06292",
        indexLabelFontColor: "#f06292",
        color: "#cccccc",
        lineThickness: 10,
        markerColor: "#f06292",
        fillOpacity: "0.2",
        markerSize: 10,
        dataPoints: pdc_best_points,
      });

      pdc_scatter_chart.push({
        name: "pdc stereo chart",
        type: "spline",
        lineColor: "#76b5e8", //#ffd357
        indexLabelFontColor: "#66666", //#ffd357
        indexLabelMaxWidth: 82,
        indexLabelFontSize: 12, //#ffd357
        lineThickness: 4,
        markerSize: 0,
        dataPoints: pdc_stereo_points,
      });

      pdc_scatter_chart.push({
        name: "pdc outdoor chart",
        type: "spline",
        indexLabelPlacement: "inside",
        lineColor: "#ffd357",
        indexLabelFontColor: "#ffd357",
        indexLabelBackgroundColor: "#CCCCCC",
        lineThickness: 4,
        fillOpacity: "0.6",
        markerSize: 0,
        dataPoints: pdc_outdoor_points,
      });

      var label_html =
        effective_html + ftp_peak_html + "<div class='cb'></div>";

      $("#power_curve").height(480);
      $("#power_curve").after(label_html);

      //ê°±ì‹ ì‹œê°„ê³¼ ë‚¨ì€ì‹œê°„
      //pdc_target_activities

      /*
			$.each(pdc_best_power, function(x, y){				
				pdc_curve_points.push({x:duration_arr[x], y:y, indexLabel: label_arr[x] + ", {y}w"});
			});

			pdc_scatter_chart.push({
				name: "pdc line chart",
				type: "line",
				lineColor: "#f06292",
				lineThickness: 5,
				markerColor: null,
				fillOpacity: "0.4", 
				markerSize: 5,
				dataPoints: pdc_curve_points
			});
*/

      GraphPowerCurve(pdc_scatter_chart, strip_line);
    </script>
  </body>
</html>
